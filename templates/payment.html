
<!doctype html>
<html dir="rtl" lang="fa">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../static/assets/css/payment.css">
    <link  href=" https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js ">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" integrity="sha384-dpuaG1suU0eT09tx5plTaGMLBsfDLzUCCUXOY2j/LSvXYuG6Bqs43ALlhIqAJVRb" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="https://v2.fontiran.com/css/IRANSans.css" rel="stylesheet">
    <script src="../static/assets/js/payment.js"></script>
  </head>
  <style>
    @font-face {
        font-family: 'IRANSans';
        src: url('../static/assets/fonts/IRANSans.ttf') format('truetype');
    }

    body,
    input,
    button
    section .main {
    font-family: 'IRANSans';
    font-size: var(--normal-font-size);
    color: rgb(29, 29, 29);
    }

    *{
        box-sizing: border-box;
        padding: 0;
        margin: 0;
    }

    .nav-item {
        margin-left: 1rem;
        margin-right: 1rem;
    }

  </style>

  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary rounded-1">
        <div class="container-fluid">
            <a class="navbar-brand" href="/"><img src="../static/assets/img/download.png" alt="Bootstrap" width="75" height="35" ></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse routes pt-2" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 d-flex justify-content-between w-100">
                    <li class="nav-item mx-4">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">پلاک خوان</a></li>
                            <li class="breadcrumb-item active" aria-current="page">پرداخت ها</li>
                        </ol>
                    </li>
                    <li class="nav-item mx-4">
                        <h5 class="nav-link" href="#">نرم افزار مدیریت</h5>
                    </li>
                    <li class="nav-item mx-4">
                      <h5 class="nav-link">
                          <span id="server-date-time">ساعت و تاریخ : در حال بارگذاری...</span>
                      </h5>
                    </li>
                </ul>

            </div>
        </div>
    </nav>
    <section class="payment-main">
        <!-- hamburger menu -->
        <nav class="navbar ">
            <div class="container-fluid">
              <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="row pt-4 mb-3" style=" border-radius: 20px; justify-content: center;">
                
              <div class="offcanvas offcanvas-start text-bg" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">

                <div class="offcanvas-header text-center pt-5 mx-4">
                  <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel text-center">پلاک خوان ها</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body pt-2 mx-2 ">
                  <ul class="navbar-nav justify-content-start flex-grow-2 pe-4">
                    <form class="d-flex mt-3" role="search">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-success" type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
                      </form>
                    <li class="nav-item">
                      <a class="nav-link active" aria-current="page" href="/">پلاک خوان</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link active" href="/traffic">کنترل ترافیک</a>
                    </li>
                    <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle active" href="/situation" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        وضعیت ها
                      </a>
                        <ul class="dropdown-menu dropdown-menu-dark" >
                        <li><a class="dropdown-item" href="/situation">مجاز ها</a></li>
                        <li><a class="dropdown-item" href="#">غیر مجاز ها</a></li>
                        <li>
                          <hr class="dropdown-divider">
                        </li>
                      </ul>
                      <li class="nav-item">
                        <a class="nav-link active" href="/requests">ثبت درخواست</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link active" href="#">تنظیمات بانک</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link active" href="/camera_settings">تنظیمات دوربین</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link active" href="#">تنظیمات راهبند</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link active" href="/setting">تنظیمات </a>
                      </li>
                    </li>
                  </ul>

                </div>
              </div>
            </div>
        </nav>
        <div class="container py-5">
            <div class="row m-0">
                <div class="col-lg-7 pb-5 pe-lg-5">
                    <div class="row bg-light p-4 rounded-3">
                        <div class="col-md-6 mb-4">
                            <label class="form-label">نوع حمل و نقل</label>
                            <select class="form-select" id="transportType">
                                <option value="1">خروج بار</option>
                                <option value="2">ورود بار</option>
                                <option value="3">ورود سواری</option>
                                <option value="4">خروج سواری</option>
                            </select>
                        </div>
    
                        <div class="col-md-6 mb-4">
                            <label class="form-label">نوع اتاق</label>
                            <select class="form-select" id="roomType">
                                <option value="1">معمولی</option>
                                <option value="2">یخچال دار</option>
                                <option value="3">خاور مسقف</option>
                                <option value="4">روباز</option>
                                <option value="5">بونکر</option>
                                <option value="6">کمپرسی</option>
                                <option value="7">میکسر</option>
                                <option value="8">کفی</option>
                            </select>
                        </div>
    
                        <div class="col-md-6 mb-4">
                            <label class="form-label">نوع خودرو</label>
                            <select class="form-select" id="vehicleType">
                                <option value="1">سواری</option>
                                <option value="2">وانت بار</option>
                                <option value="4">کامیونت</option>
                                <option value="5">تک محور</option>
                                <option value="6">دو محور</option>
                                <option value="7">تریلی</option>
                                <option value="8">کمرشکن</option>
                            </select>
                        </div>
    
                        <div class="col-md-6 mb-4">
                            <label class="form-label">تعداد عبور</label>
                            <input type="number" id="passCount" 
                                   class="form-control" 
                                   value="1" 
                                   min="1" 
                                   max="100">
                        </div>
                    </div>
                </div>
    
                <div class="col-lg-5 ps-lg-4">
                    <div class="bg-light p-4 rounded-3">
                        <h4 class="mb-4">صورتحساب</h4>
                        
                        <div class="d-flex justify-content-between mb-3">
                            <span>قیمت پایه:</span>
                            <span id="basePrice" class="price-number">0 ریال</span>
                        </div>
                        
                        <div class="d-flex justify-content-between mb-3">
                            <span>ضریب حمل و نقل:</span>
                            <span id="transportFactor" class="price-number">1x</span>
                        </div>
                        
                        <div class="d-flex justify-content-between mb-3">
                            <span>ضریب نوع اتاق:</span>
                            <span id="roomFactor" class="price-number">1x</span>
                        </div>
                        
                        <div class="d-flex justify-content-between mb-3">
                            <span>هزینه خدمات (10%):</span>
                            <span id="serviceFee" class="price-number">0 ریال</span>
                        </div>
                        
                        <hr>
                        
                        <div class="d-flex justify-content-between mb-3 total-price">
                            <span>مبلغ قابل پرداخت:</span>
                            <span id="totalPrice" class="price-number">0 ریال</span>
                        </div>
    
                        <button class="btn btn-primary w-100 mt-4">
                            پرداخت نهایی
                            <i class="fas fa-arrow-left ms-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
        
  </body>
 <script>
    const priceConfig = {
        basePrices: {
            vehicle: {
                '1': 500000,   // سواری
                '2': 800000,   // وانت بار
                '4': 1200000,  // کامیونت
                '5': 1500000, // تک محور
                '6': 2000000, // دو محور
                '7': 2500000, // تریلی
                '8': 3000000  // کمرشکن
            },
            transportFactors: {
                '1': 1.2,  // خروج بار
                '2': 1.1,  // ورود بار
                '3': 1.0,  // ورود سواری
                '4': 1.0   // خروج سواری
            },
            roomFactors: {
                '1': 1.0,  // معمولی
                '2': 1.3,  // یخچال دار
                '3': 1.2,  // خاور مسقف
                '4': 1.1,  // روباز
                '5': 1.4,  // بونکر
                '6': 1.3,  // کمپرسی
                '7': 1.5,  // میکسر
                '8': 1.1   // کفی
            }
        },

        formatPrice: (price) => {
            return new Intl.NumberFormat('fa-IR', {
                style: 'currency',
                currency: 'IRR',
                maximumFractionDigits: 0
            }).format(price).replace('ریال', '') + 'ریال';
        }
    };

    function calculatePrice() {
        // دریافت مقادیر
        const vehicleType = document.getElementById('vehicleType').value;
        const transportType = document.getElementById('transportType').value;
        const roomType = document.getElementById('roomType').value;
        const passCount = parseInt(document.getElementById('passCount').value);

        // محاسبه قیمت پایه
        let basePrice = priceConfig.basePrices.vehicle[vehicleType];
        const transportFactor = priceConfig.basePrices.transportFactors[transportType];
        const roomFactor = priceConfig.basePrices.roomFactors[roomType];

        // اعمال ضرایب
        let total = basePrice * transportFactor * roomFactor;
        const serviceFee = total * 0.1;
        total = (total + serviceFee) * passCount;

        // نمایش مقادیر
        document.getElementById('basePrice').textContent = priceConfig.formatPrice(basePrice);
        document.getElementById('transportFactor').textContent = transportFactor + 'x';
        document.getElementById('roomFactor').textContent = roomFactor + 'x';
        document.getElementById('serviceFee').textContent = priceConfig.formatPrice(serviceFee);
        document.getElementById('totalPrice').textContent = priceConfig.formatPrice(total);
    }

    // افزودن رویدادهای تغییر
    ['vehicleType', 'transportType', 'roomType', 'passCount'].forEach(id => {
        document.getElementById(id).addEventListener('change', calculatePrice);
    });

    // محاسبه اولیه
    calculatePrice();
 </script>
</html>